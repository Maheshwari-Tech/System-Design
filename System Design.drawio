<mxfile host="Electron" modified="2025-07-08T09:43:24.223Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.6.4 Chrome/124.0.6367.207 Electron/30.0.6 Safari/537.36" etag="yl3-qbnWs_xg1XIxfArs" version="24.6.4" type="device" pages="2">
  <diagram name="Online-Offline-Indicator" id="wSL-3_Ir_zokPccPBnLw">
    <mxGraphModel dx="1420" dy="893" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-196" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="100" y="2910" width="1050" height="310" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-169" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="2558" width="740" height="140" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-153" value="" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="75" y="1950" width="610" height="210" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-74" value="" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="810" y="620" width="340" height="160" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-71" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="15" y="668" width="690" height="328" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-65" value="" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="70" y="112.5" width="580" height="147.5" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-64" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="20" y="330" width="690" height="300" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-1" value="&lt;b style=&quot;font-size: 22px;&quot;&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Design Online Offline Indicator&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;div style=&quot;font-size: 22px;&quot;&gt;&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="20" width="350" height="70" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-2" value="Requirements:&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;user 1&amp;nbsp; -&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;user 2 -&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;user 3 -&amp;nbsp;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="130" width="100" height="90" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-18" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="180" y="165" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-20" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#666666;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="180" y="190" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-21" value="Storage:&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;user -&amp;gt; online/ offline&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;int : bool&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Access : Key - value&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="370" y="120" width="140" height="190" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-22" value="DB&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="570" y="150" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-23" value="&lt;b&gt;Interfacing API :&amp;nbsp;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;GET /status/users? ids = u1, u2, u3, u4&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="70" y="360" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-24" target="XxZIgr2PK9u9EvS8DnmL-25" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="180" y="540" />
              <mxPoint x="180" y="540" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-24" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="120" y="500" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-25" value="API Server&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="240" y="510" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-26" value="Database&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="490" y="500" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-25" target="XxZIgr2PK9u9EvS8DnmL-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-29" value="&lt;b&gt;Updating the database :&amp;nbsp;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="30" y="668" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-33" value="&lt;div style=&quot;forced-color-adjust: none;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="70" y="760" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-44" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="810" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-39" value="API Server&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="260" y="780" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-45" value="Database&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="520" y="770" width="70" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-46" value="Every user Periodically sends &quot;heartbeat&quot; to the service. : 10 seconds&amp;nbsp;&lt;div&gt;If we do not recive heartbeat long enough --&amp;gt; 30 seconds. : Offline&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="50" y="900" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-47" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;POST / heartbeat :&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;div&gt;The authenticated user will be marked as alive&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="430" y="695" width="270" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-49" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" target="XxZIgr2PK9u9EvS8DnmL-39" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="140" y="787.5" as="sourcePoint" />
            <mxPoint x="730" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-57" value="&lt;b&gt;Storage :&amp;nbsp;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;User-id, last_hb (timestamp)&amp;nbsp;&lt;/div&gt;&lt;div&gt;int, long&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="810" y="648" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-58" value="DB&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="1030" y="643" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-60" value="&lt;div style=&quot;forced-color-adjust: none;&quot;&gt;&lt;font color=&quot;#ff0000&quot; style=&quot;forced-color-adjust: none;&quot;&gt;GET /status/user? id= u1&amp;nbsp;&lt;/font&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="445" y="400" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-70" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;exitX=0.474;exitY=1.02;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.486;entryY=-0.007;entryDx=0;entryDy=0;entryPerimeter=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="354.7900000000001" y="260.00000000000006" as="sourcePoint" />
            <mxPoint x="365.2099999999999" y="324.9500000000001" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-72" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;exitX=0.448;exitY=0.997;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.472;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;width=6;endSize=4.57;sketch=1;curveFitting=1;jiggle=2;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-64" target="XxZIgr2PK9u9EvS8DnmL-71" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="310" y="720" as="sourcePoint" />
            <mxPoint x="360" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-75" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;entryX=0.003;entryY=0.475;entryDx=0;entryDy=0;entryPerimeter=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" target="XxZIgr2PK9u9EvS8DnmL-74" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="710" y="760" as="sourcePoint" />
            <mxPoint x="760" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-77" value="If No entry exists - offline&lt;div&gt;If entry and entry.last_hb &amp;lt; Now() - 30 seconds : offline&amp;nbsp;&lt;/div&gt;&lt;div&gt;else : online&amp;nbsp;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="990" y="880" width="170" height="100" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-79" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="100" y="740" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-82" value="&lt;b&gt;&lt;u&gt;Scale Estimation :&amp;nbsp;&lt;/u&gt;&lt;/b&gt;&lt;div&gt;1 user = 1 entry&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1 entry : user_id, last_hb&amp;nbsp;&lt;/div&gt;&lt;div&gt;4 Byte, 4 Byte&amp;nbsp; = 8 Byte&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1 M user = 8 MB&amp;nbsp;&lt;/div&gt;&lt;div&gt;1 B users = 8 GB&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Total Storage required = 8 GB&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#666666;fillColor=#f5f5f5;sketch=1;curveFitting=1;jiggle=2;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="90" y="1120" width="190" height="220" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-84" value="&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;one DB Instance can definately hold the data&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;But, it can not handle the load ..&amp;nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;Therefore we need to partition the data.&amp;nbsp;&lt;div&gt;each node handle a subset of the requests&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#666666;fillColor=#f5f5f5;sketch=1;curveFitting=1;jiggle=2;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="370" y="1165" width="280" height="130" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-85" value="Database&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="750" y="1140" width="70" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-86" value="Database&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="950" y="1160" width="70" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-87" value="Database&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="820" y="1270" width="70" height="70" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-88" value="" style="endArrow=none;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=-0.05;entryY=0.588;entryDx=0;entryDy=0;entryPerimeter=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-87" target="XxZIgr2PK9u9EvS8DnmL-86" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="1240" as="sourcePoint" />
            <mxPoint x="880" y="1240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="820" y="1190" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-89" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=52.5;entryPerimeter=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" target="XxZIgr2PK9u9EvS8DnmL-86" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="860" y="1270" as="sourcePoint" />
            <mxPoint x="550" y="1190" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-92" value="&lt;b&gt;&lt;u&gt;Can we do better on storage?&amp;nbsp;&lt;/u&gt;&lt;/b&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;* Requirement : if user is online or offline&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;*&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;we dont need to store all the user --&amp;gt; absense : offline&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;Let&#39;s expire the entries after 30 seconds.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Total entries = Active users&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;if 1 B total users and 100K active then total entries = 100L&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;pre style=&quot;text-align: left;&quot;&gt;Size of DB = 800 KB&amp;nbsp;&lt;/pre&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#666666;fillColor=#f5f5f5;sketch=1;curveFitting=1;jiggle=2;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="30" y="1430" width="330" height="280" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-93" value="&lt;b&gt;Sharded db&amp;nbsp;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="775" y="1358" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-95" value="&lt;b&gt;How to auto delete?&amp;nbsp;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Approach 1: write a cron job&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Approach 2:&amp;nbsp; Offload this to datastore&lt;/div&gt;&lt;div&gt;(preferred)&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#666666;fillColor=#f5f5f5;sketch=1;curveFitting=1;jiggle=2;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="580" y="1480" width="220" height="100" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-96" value="1st -&amp;nbsp;&lt;br&gt;Not a robust solution, need to handle edge cases&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="850" y="1520" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-97" value="&lt;pre&gt;&lt;b&gt;Never re-invent the wheel !&lt;/b&gt;&lt;/pre&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="695" y="1640" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-99" value="&lt;font color=&quot;#3019ff&quot;&gt;&lt;b&gt;DB with KV + expiration --&amp;gt; Redis , DynamoDB&amp;nbsp;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#b85450;fillColor=#f8cecc;" parent="1" vertex="1">
          <mxGeometry x="360" y="1760" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-100" value="&lt;b&gt;flow&lt;/b&gt;: post:&amp;nbsp; Upon recieving th heartbeat : update entry in redis / dynamoDB with ttl = 30 second&amp;nbsp;&lt;div&gt;get: check if entry exists?&amp;nbsp;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="130" y="1820" width="530" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-149" value="&lt;b&gt;Redis Vs DynamoDB&amp;nbsp;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="205" y="1970" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-150" value="&lt;div&gt;O(1) write in Memory&amp;nbsp;&lt;/div&gt;&lt;div&gt;Cost effective&lt;/div&gt;&lt;div&gt;Multiple env setup is easy&amp;nbsp;&amp;nbsp;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="145" y="2000" width="120" height="130" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-151" value="&lt;div&gt;Maintanance&amp;nbsp;&lt;br&gt;&lt;/div&gt;&lt;font color=&quot;#ff8629&quot;&gt;&amp;nbsp;Vendor Lock In&amp;nbsp;&lt;/font&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="275" y="2000" width="120" height="130" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-152" value="&lt;div&gt;Redis is preferred&amp;nbsp;&lt;/div&gt;Also, we do not need persitance&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="455" y="2030" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-154" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;exitX=0.48;exitY=1.013;exitDx=0;exitDy=0;exitPerimeter=0;sketch=1;curveFitting=1;jiggle=2;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-74" target="XxZIgr2PK9u9EvS8DnmL-77" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="490" y="940" as="sourcePoint" />
            <mxPoint x="540" y="890" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-156" value="&lt;b&gt;Note: In real world, Webscockets are used in such system.&amp;nbsp;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d79b00;fillColor=#ffe6cc;" parent="1" vertex="1">
          <mxGeometry x="695" y="2200" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-157" value="&lt;b&gt;How is our DB Doing?&lt;/b&gt;&lt;div style=&quot;line-height: 170%;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 170%;&quot;&gt;&amp;nbsp;Heartbeat is sent every 10 seconds.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 170%;&quot;&gt;So, one user in 1 minute sends 6 heartbeats.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 170%;&quot;&gt;if there are 1 M active users, our system will get 6M req/Min&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 170%;&quot;&gt;Each heartbeat requests results in 1 DB call.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="35" y="2320" width="340" height="130" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-158" value="Our DB needs to handle 6M updates per minute&amp;nbsp;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#666666;fillColor=#f5f5f5;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="560" y="2400" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-159" value="&lt;b&gt;How to make it better?&amp;nbsp;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Async flow Not an option&amp;nbsp;&lt;/div&gt;&lt;div&gt;What is hectic? Creating a new connection everytime&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Connection Pool&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#666666;fillColor=#f5f5f5;textShadow=0;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="35" y="2520" width="310" height="100" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-160" value="Db&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="820" y="2601" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-161" value="Server&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="535" y="2601" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-162" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0;entryDx=0;entryDy=27.5;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-161" target="XxZIgr2PK9u9EvS8DnmL-160" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="2628" as="sourcePoint" />
            <mxPoint x="775" y="2618" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-163" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="XxZIgr2PK9u9EvS8DnmL-160" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="655" y="2636" as="sourcePoint" />
            <mxPoint x="770" y="2626" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-166" value="&lt;b&gt;Connection Pool&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="670" y="2571" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-167" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-161" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="665" y="2646" as="sourcePoint" />
            <mxPoint x="820" y="2651" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-168" value="&lt;b&gt;New Product Requirement:&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We show user: Active 12 mins ago&amp;nbsp;&lt;/div&gt;&lt;div&gt;We cannot use auto expire approach, instead we would use have to store all data for all users&amp;nbsp;&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#666666;fillColor=#f5f5f5;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="10" y="2720" width="530" height="100" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-170" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="2970" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-171" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="3070" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-172" value="Load Balancer&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="3030" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-173" value="API Servers" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="2990" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-174" value="API Servers" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="3060" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-175" value="API Servers" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="480" y="3130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-176" value="Database&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="950" y="2950" width="70" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-177" value="Database&amp;nbsp;" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="950" y="3050" width="70" height="80" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-178" value="Proxy" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="730" y="3050" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-179" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0.007;entryY=0.588;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-178" target="XxZIgr2PK9u9EvS8DnmL-176" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="865" y="3050" as="sourcePoint" />
            <mxPoint x="915" y="3000" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-180" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0.007;entryY=0.588;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="850" y="3060" as="sourcePoint" />
            <mxPoint x="950" y="3007" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-181" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="XxZIgr2PK9u9EvS8DnmL-177" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="860" y="3090" as="sourcePoint" />
            <mxPoint x="940" y="3037" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-182" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="850" y="3099.5" as="sourcePoint" />
            <mxPoint x="940" y="3099.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-183" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-173" target="XxZIgr2PK9u9EvS8DnmL-178" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="3110" as="sourcePoint" />
            <mxPoint x="970" y="3110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-184" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-174" target="XxZIgr2PK9u9EvS8DnmL-178" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="610" y="3045" as="sourcePoint" />
            <mxPoint x="720" y="3080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-185" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-175" target="XxZIgr2PK9u9EvS8DnmL-178" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="620" y="3055" as="sourcePoint" />
            <mxPoint x="744" y="3091" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-186" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-172" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="3150" as="sourcePoint" />
            <mxPoint x="480" y="3090" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-187" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-170" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="3150" as="sourcePoint" />
            <mxPoint x="220" y="3050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-188" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-171" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="160" y="3019" as="sourcePoint" />
            <mxPoint x="230" y="3060" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-189" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-172" target="XxZIgr2PK9u9EvS8DnmL-173" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="3085" as="sourcePoint" />
            <mxPoint x="490" y="3100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-190" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-172" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="3090" as="sourcePoint" />
            <mxPoint x="470" y="3150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-191" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="600" y="3030" as="sourcePoint" />
            <mxPoint x="730" y="3060" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-192" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.013;entryY=0.633;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-174" target="XxZIgr2PK9u9EvS8DnmL-178" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="620" y="3055" as="sourcePoint" />
            <mxPoint x="720" y="3090" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-193" value="" style="endArrow=none;html=1;rounded=0;entryX=-0.021;entryY=0.867;entryDx=0;entryDy=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryPerimeter=0;" parent="1" source="XxZIgr2PK9u9EvS8DnmL-175" target="XxZIgr2PK9u9EvS8DnmL-178" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="630" y="3065" as="sourcePoint" />
            <mxPoint x="760" y="3095" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-194" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="680" y="3088" width="20" height="170" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-195" value="Similar System :&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Failure Detection in a distributed system&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#9673a6;fillColor=#e1d5e7;" parent="1" vertex="1">
          <mxGeometry x="840" y="2780" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="XxZIgr2PK9u9EvS8DnmL-197" value="avoid 3 way handshake&amp;nbsp;&lt;div&gt;save memory allocation in creating connection&amp;nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="980" y="2630" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AcHfh-iSUKmtqIUpAKEG-1" value="&lt;font&gt;&lt;b&gt;&lt;u&gt;How to approach system design&lt;/u&gt;&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font&gt;- Decide the core and build system arround it.&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: normal;&quot;&gt;&lt;font&gt;- core is use case specific and it could be database, communication protocol, Must have components - CDN, Cache&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;Another good approach :&amp;nbsp;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;start with day 0 architecture&amp;nbsp;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;see how each component would behave at next scale&amp;nbsp;&lt;/li&gt;&lt;li&gt;mitigate and re architect&amp;nbsp;&lt;/li&gt;&lt;li&gt;repeat&amp;nbsp;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;b&gt;Points to remember :&amp;nbsp;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;font&gt;Understand the core property &amp;amp; access pattern&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;affinity towards a tech comes second&amp;nbsp;&lt;/li&gt;&lt;li&gt;build an intuitation towards building systems&amp;nbsp;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="940" y="260" width="620" height="320" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Qi9isv8leUfcKKxLr5QZ" name="Multi-User Blogging Platform">
    <mxGraphModel dx="1420" dy="893" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-21" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;gradientColor=#b3b3b3;strokeColor=#666666;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="40" y="260" width="730" height="320" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-1" value="&lt;b style=&quot;font-size: 20px;&quot;&gt;Design a multi user Blogging platform&amp;nbsp;&lt;/b&gt;&lt;div style=&quot;font-size: 20px;&quot;&gt;&lt;br style=&quot;font-size: 20px;&quot;&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=20;" parent="1" vertex="1">
          <mxGeometry x="40" y="20" width="390" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-2" value="&lt;b&gt;Requirements&amp;nbsp; -&amp;nbsp;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;One user have multiple blogs&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Multiple users&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#6c8ebf;fillColor=#dae8fc;gradientColor=#7ea6e0;sketch=1;curveFitting=1;jiggle=2;" parent="1" vertex="1">
          <mxGeometry x="40" y="120" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-3" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Database&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="105" y="310" width="90" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-4" value="Relational&amp;nbsp;&lt;br&gt;DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="110" y="390" width="90" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-16" value="Users " style="swimlane;startSize=50;" parent="1" vertex="1">
          <mxGeometry x="270" y="280" width="200" height="220" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-18" value="Id&amp;nbsp;&lt;div style=&quot;line-height: 180%;&quot;&gt;Name&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 180%;&quot;&gt;Bio&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="Jvf5-RM5SSi1C8BGx77r-16" vertex="1">
          <mxGeometry x="35" y="110" width="60" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-17" value="Blogs" style="swimlane;startSize=50;" parent="1" vertex="1">
          <mxGeometry x="540" y="280" width="200" height="220" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-19" value="id&amp;nbsp;&lt;div style=&quot;line-height: 190%;&quot;&gt;author_id&lt;/div&gt;&lt;div style=&quot;line-height: 190%;&quot;&gt;title&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 190%;&quot;&gt;is_delted&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 190%;&quot;&gt;published_at&lt;/div&gt;&lt;div style=&quot;line-height: 190%;&quot;&gt;body&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;spacingTop=7;" parent="Jvf5-RM5SSi1C8BGx77r-17" vertex="1">
          <mxGeometry x="40" y="60" width="90" height="150" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-22" value="&lt;b&gt;Importance of is_deleted :&amp;nbsp;&lt;/b&gt;&lt;div&gt;Soft delete&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;when user invoke delete, instead of delete we update&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Key reasons: Recoverability , archival, audit&amp;nbsp;&lt;/div&gt;&lt;div&gt;+ easy on database engine - no tree re-balncing&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;gradientColor=#ffd966;" parent="1" vertex="1">
          <mxGeometry x="850" y="275" width="310" height="110" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-23" value="&lt;b&gt;column type&amp;nbsp;&lt;/b&gt;&lt;div style=&quot;line-height: 150%;&quot;&gt;body vs bio&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 150%;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 150%;&quot;&gt;long text vs&amp;nbsp; short text&lt;/div&gt;&lt;div style=&quot;line-height: 150%;&quot;&gt;LONGTEXT&amp;nbsp; VARCHAR&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 150%;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 150%;&quot;&gt;long text: stored as a reference ...&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 150%;&quot;&gt;short text: stored along with other columns&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;line-height: 150%;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;fontFamily=Helvetica;gradientColor=#ffd966;" parent="1" vertex="1">
          <mxGeometry x="850" y="435" width="250" height="170" as="geometry" />
        </mxCell>
        <mxCell id="Jvf5-RM5SSi1C8BGx77r-24" value="&lt;font face=&quot;Helvetica&quot;&gt;&lt;b&gt;Storing datetime in DB&amp;nbsp;&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;b&gt;datetime as datetime&amp;nbsp;&amp;nbsp;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- 02-04-2022 T 09:01:242&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- Serialized in some format&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- convient&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- sub-optimal&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- heavy on size and index&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;b&gt;datetime as epoch integer&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- efficient&lt;b&gt;&amp;nbsp;&amp;nbsp;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- optimal,&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- lightweight,&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;- cons: human readabilty from db&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;seconds since 1st Jan 1970&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Helvetica&quot;&gt;&lt;b&gt;datetime as custom format&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;font-family: Helvetica; background-color: initial;&quot;&gt;(int)&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Helvetica; background-color: initial;&quot;&gt;YYYYMMDD - 20220402&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#d6b656;fillColor=#fff2cc;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;gradientColor=#ffd966;" parent="1" vertex="1">
          <mxGeometry x="1230" y="255" width="200" height="370" as="geometry" />
        </mxCell>
        <mxCell id="0wfWOL8IG1Yo-xmaO_2y-1" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;Caching&lt;/b&gt;&amp;nbsp;&lt;/font&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;-reduce response times by saving, any heavy comuptation&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;* cache are not only RAM based .&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;* Typical use: redcue disk I/O or network I/O&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 16px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Cache are just glorafied Hash Table (with advance datastructure)&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#6c8ebf;fillColor=#dae8fc;fontFamily=Helvetica;gradientColor=#7ea6e0;" parent="1" vertex="1">
          <mxGeometry x="35" y="690" width="480" height="150" as="geometry" />
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-1" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" parent="1" vertex="1">
          <mxGeometry x="250" y="1000" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-2" value="Load Balancer" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" parent="1" vertex="1">
          <mxGeometry x="395" y="1000" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-3" value="API Server" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" parent="1" vertex="1">
          <mxGeometry x="600" y="1110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-4" value="API Server" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" parent="1" vertex="1">
          <mxGeometry x="610" y="1030" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-5" value="API Server" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" parent="1" vertex="1">
          <mxGeometry x="600" y="950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-6" value="Cache" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" parent="1" vertex="1">
          <mxGeometry x="920" y="870" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-7" value="DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" parent="1" vertex="1">
          <mxGeometry x="940" y="1010" width="170" height="160" as="geometry" />
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-9" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=-0.014;entryY=0.345;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="8QmH9BF-VNEy45H3YFuf-5" edge="1" target="8QmH9BF-VNEy45H3YFuf-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1100" y="1050" as="sourcePoint" />
            <mxPoint x="920" y="1040" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-10" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=112.5;entryPerimeter=0;" parent="1" edge="1" target="8QmH9BF-VNEy45H3YFuf-7" source="8QmH9BF-VNEy45H3YFuf-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="730" y="1165" as="sourcePoint" />
            <mxPoint x="936" y="1130" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-11" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" parent="1" source="8QmH9BF-VNEy45H3YFuf-4" target="8QmH9BF-VNEy45H3YFuf-7" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750" y="1065" as="sourcePoint" />
            <mxPoint x="910" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-13" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=-15;entryPerimeter=0;" parent="1" source="8QmH9BF-VNEy45H3YFuf-4" target="8QmH9BF-VNEy45H3YFuf-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="730" y="995" as="sourcePoint" />
            <mxPoint x="930" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-14" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="8QmH9BF-VNEy45H3YFuf-5" target="8QmH9BF-VNEy45H3YFuf-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="720" y="957.5" as="sourcePoint" />
            <mxPoint x="950" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-15" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.992;exitY=0.383;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" target="8QmH9BF-VNEy45H3YFuf-6" edge="1" source="8QmH9BF-VNEy45H3YFuf-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="730" y="1130" as="sourcePoint" />
            <mxPoint x="950" y="1070" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-16" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="8QmH9BF-VNEy45H3YFuf-2" edge="1" target="8QmH9BF-VNEy45H3YFuf-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="760" y="1025" as="sourcePoint" />
            <mxPoint x="590" y="1150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-17" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="8QmH9BF-VNEy45H3YFuf-2" target="8QmH9BF-VNEy45H3YFuf-4" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="770" y="1035" as="sourcePoint" />
            <mxPoint x="970" y="1090" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-18" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="8QmH9BF-VNEy45H3YFuf-2" target="8QmH9BF-VNEy45H3YFuf-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="780" y="1045" as="sourcePoint" />
            <mxPoint x="980" y="1100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8QmH9BF-VNEy45H3YFuf-19" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="8QmH9BF-VNEy45H3YFuf-1" edge="1" target="8QmH9BF-VNEy45H3YFuf-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="790" y="1055" as="sourcePoint" />
            <mxPoint x="400" y="1040" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
